# Retro-PC Store - Инструкции по настройке

## Обзор архитектуры

Проект использует Jamstack архитектуру:
- **Frontend**: Статический HTML/CSS/JS
- **Backend**: Serverless функции на Netlify
- **API**: eBay Finding API для получения товаров

## Настройка eBay API

### 1. Получение ключа API

1. Зарегистрируйтесь на [eBay Developers Program](https://developer.ebay.com/)
2. Создайте новое приложение
3. Получите **App ID** (Application ID)
4. Этот ключ будет использоваться в переменной окружения `EBAY_APP_ID`

### 2. Настройка переменных окружения

В Netlify Dashboard:
1. Перейдите в Settings → Environment variables
2. Добавьте переменную:
   - **Ключ**: `EBAY_APP_ID`
   - **Значение**: Ваш eBay Application ID

Для локальной разработки создайте файл `.env`:
```
EBAY_APP_ID=ваш_ebay_app_id_здесь
```

## Развертывание на Netlify

### Автоматическое развертывание

1. Подключите GitHub репозиторий к Netlify
2. Netlify автоматически обнаружит функции в папке `/functions/`
3. Установите переменную окружения `EBAY_APP_ID`
4. Деплой произойдет автоматически

### Ручное развертывание

```bash
# Установка Netlify CLI
npm install -g netlify-cli

# Логин в Netlify
netlify login

# Деплой
netlify deploy --prod
```

## Локальная разработка

### Требования
- Node.js 16+
- Netlify CLI

### Запуск локально

```bash
# Установка Netlify CLI (если не установлен)
npm install -g netlify-cli

# Запуск локального сервера с функциями
netlify dev
```

Сайт будет доступен по адресу: `http://localhost:8888`

## Структура файлов

```
retro-pc-store/
├── index.html              # Главная страница
├── style.css               # Стили в ретро стиле
├── main.js                 # Клиентский JavaScript
├── functions/
│   └── searchEbay.js       # Serverless функция для eBay API
├── .env                    # Локальные переменные окружения
└── README.md               # Эта инструкция
```

## API Endpoints

### `/.netlify/functions/searchEbay`

**Метод**: GET
**Параметры**:
- `keywords` (обязательный) - ключевые слова для поиска

**Пример запроса**:
```
GET /.netlify/functions/searchEbay?keywords=Intel+8086
```

**Пример ответа**:
```json
{
  "items": [
    {
      "title": "Intel 8086 CPU Processor Vintage",
      "galleryURL": "https://...",
      "viewItemURL": "https://www.ebay.com/itm/...",
      "currentPrice": "USD 89.99",
      "location": "United States",
      "condition": "Used"
    }
  ],
  "count": 1,
  "searchTerm": "Intel 8086"
}
```

## Функциональность

### Клиентская часть (main.js)

- **Автоматическая загрузка товаров** при загрузке страницы
- **Поиск по категориям**: Intel 8086, 8088, 8087
- **Обработка ошибок** и состояний загрузки
- **Адаптивный дизайн** для мобильных устройств
- **Анимации** в стиле ретро-терминала

### Серверная функция (searchEbay.js)

- **Безопасная работа с eBay API** (скрытие ключей)
- **Фильтрация результатов** (только винтажные компоненты)
- **Обработка ошибок** и валидация данных
- **CORS поддержка** для кроссдоменных запросов
- **Кэширование** (может быть добавлено в будущем)

## Настройка поиска

В файле `main.js` можно изменить поисковые запросы:

```javascript
const SEARCH_QUERIES = [
    'Intel 8086 CPU processor',
    'Intel 8088 CPU processor', 
    'Intel 8087 math coprocessor',
    // Добавьте свои запросы здесь
];
```

## Безопасность

- ✅ API ключи скрыты в серверных функциях
- ✅ CORS настроен правильно
- ✅ Валидация входных данных
- ✅ Обработка ошибок без раскрытия внутренней информации

## Производительность

- **Ленивая загрузка изображений** (`loading="lazy"`)
- **Ограничение количества запросов** к eBay API
- **Задержки между запросами** для снижения нагрузки
- **Компрессия и минификация** (автоматически в Netlify)

## Мониторинг и отладка

### Логи функций

В Netlify Dashboard → Functions → Logs можно посмотреть логи выполнения

### Локальная отладка

```bash
# Запуск с подробными логами
netlify dev --debug
```

### Тестирование API

```bash
# Тест серверной функции
curl "http://localhost:8888/.netlify/functions/searchEbay?keywords=Intel+8086"
```

## Возможные улучшения

1. **Кэширование результатов** для улучшения производительности
2. **Пагинация** для большого количества товаров
3. **Фильтры** по цене, состоянию, местоположению
4. **Избранное** с сохранением в localStorage
5. **PWA функциональность** для оффлайн доступа
6. **Аналитика** для отслеживания популярных поисков

## Поддержка

При возникновении проблем:
1. Проверьте логи функций в Netlify Dashboard
2. Убедитесь, что `EBAY_APP_ID` установлен правильно
3. Проверьте статус eBay API на [eBay Developer Status](https://developer.ebay.com/support/api-status)

## Лицензия

Этот проект предназначен для образовательных целей. eBay API используется в соответствии с их Terms of Service.